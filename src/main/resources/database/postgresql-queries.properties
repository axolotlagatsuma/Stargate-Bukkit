CREATE_TABLE_PORTAL_POSITION_TYPE=CREATE TABLE IF NOT EXISTS {PositionType} (id SERIAL PRIMARY KEY, positionName NVARCHAR(16));
CREATE_TABLE_PORTAL_FLAG=CREATE TABLE IF NOT EXISTS {Flag} (id SERIAL PRIMARY KEY, `character` CHAR(1) UNIQUE NOT NULL);
CREATE_VIEW_PORTAL=CREATE OR REPLACE VIEW {PortalView} AS SELECT {Portal}.*, COALESCE(GROUP_CONCAT({Flag}.`character`, ''), '') AS flags, {LastKnownName}.lastKnownName FROM {Portal} LEFT OUTER JOIN {PortalFlagRelation} ON {Portal}.name = {PortalFlagRelation}.name AND {Portal}.network = {PortalFlagRelation}.network LEFT OUTER JOIN {Flag} ON {PortalFlagRelation}.flag = {Flag}.id LEFT OUTER JOIN {LastKnownName} ON {Portal}.network = {LastKnownName}.uuid GROUP BY {Portal}.name, {Portal}.network;
CREATE_VIEW_INTER_PORTAL=CREATE OR REPLACE VIEW {InterPortalView} AS SELECT {InterPortal}.*, COALESCE(GROUP_CONCAT({Flag}.`character`, ''), '') AS flags, {LastKnownName}.lastKnownName, {ServerInfo}.serverName FROM {InterPortal} LEFT OUTER JOIN {InterPortalFlagRelation} ON {InterPortal}.name = {InterPortalFlagRelation}.name AND {InterPortal}.network = {InterPortalFlagRelation}.network LEFT OUTER JOIN {Flag} ON {InterPortalFlagRelation}.flag = {Flag}.id LEFT OUTER JOIN {LastKnownName} ON {InterPortal}.network = {LastKnownName}.uuid LEFT OUTER JOIN {ServerInfo} ON {ServerInfo}.serverId = {InterPortal}.homeServerId GROUP BY {InterPortal}.name, {InterPortal}.network;
CREATE_INDEX_PORTAL_POSITION=CREATE INDEX IF NOT EXISTS {PortalPositionIndex} ON {PortalPosition} (portalName, networkName);
CREATE_INDEX_INTER_PORTAL_POSITION=CREATE INDEX IF NOT EXISTS {InterPortalPositionIndex} ON {InterPortalPosition} (portalName, networkName);