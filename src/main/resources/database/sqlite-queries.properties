GET_ALL_PORTALS=SELECT * FROM {PortalView};
GET_ALL_INTER_PORTALS=SELECT * FROM {InterPortalView};
GET_ALL_PORTAL_FLAGS=SELECT id, `character` FROM {Flag};
REPLACE_LAST_KNOWN_NAME=REPLACE INTO {LastKnownName} (uuid, lastKnownName) VALUES (?, ?);
CREATE_TABLE_PORTAL=CREATE TABLE IF NOT EXISTS {Portal} (name NVARCHAR(180) NOT NULL, network NVARCHAR(180) NOT NULL, destination NVARCHAR(180), world NVARCHAR(255) NOT NULL, x INTEGER, y INTEGER, z INTEGER, ownerUUID VARCHAR(36), gateFileName NVARCHAR(255), facing INTEGER, flipZ BOOLEAN, PRIMARY KEY (name, network));
ADD_META_TO_TABLE_PORTAL=ALTER TABLE {Portal} ADD metaData TEXT;
CREATE_TABLE_INTER_PORTAL=CREATE TABLE IF NOT EXISTS {InterPortal} (name NVARCHAR(180) NOT NULL, network NVARCHAR(180) NOT NULL, destination NVARCHAR(180), world NVARCHAR(255) NOT NULL, x INTEGER, y INTEGER, z INTEGER, ownerUUID VARCHAR(36), gateFileName NVARCHAR(255), facing INTEGER, flipZ BOOLEAN, homeServerId VARCHAR(36), PRIMARY KEY (name, network));
ADD_META_TO_TABLE_INTER_PORTAL=ALTER TABLE {InterPortal} ADD metaData TEXT;
CREATE_TABLE_PORTAL_POSITION_TYPE=CREATE TABLE IF NOT EXISTS {PositionType} (id INTEGER PRIMARY KEY AUTOINCREMENT, positionName NVARCHAR(16));
INSERT_PORTAL_POSITION_TYPE=INSERT INTO {PositionType} (positionName) VALUES (?);
GET_ALL_PORTAL_POSITION_TYPES=SELECT id, positionName FROM {PositionType};
CREATE_TABLE_PORTAL_POSITION=CREATE TABLE IF NOT EXISTS {PortalPosition} (portalName NVARCHAR(180) NOT NULL, networkName NVARCHAR(180) NOT NULL, xCoordinate INTEGER NOT NULL, yCoordinate INTEGER NOT NULL, zCoordinate INTEGER NOT NULL, positionType INTEGER NOT NULL, PRIMARY KEY (portalName, networkName, xCoordinate, yCoordinate, zCoordinate), FOREIGN KEY (portalName, networkName) REFERENCES {Portal}(name, network), FOREIGN KEY (positionType) REFERENCES {PositionType} (id));
ADD_META_TO_TABLE_PORTAL_POSITION=ALTER TABLE {PortalPosition} ADD metaData TEXT;
CREATE_TABLE_INTER_PORTAL_POSITION=CREATE TABLE IF NOT EXISTS {InterPortalPosition} (portalName NVARCHAR(180) NOT NULL, networkName NVARCHAR(180) NOT NULL, xCoordinate INTEGER NOT NULL, yCoordinate INTEGER NOT NULL, zCoordinate INTEGER NOT NULL, positionType INTEGER NOT NULL, PRIMARY KEY (portalName, networkName, xCoordinate, yCoordinate, zCoordinate), FOREIGN KEY (portalName, networkName) REFERENCES {InterPortal}(name, network), FOREIGN KEY (positionType) REFERENCES {PositionType} (id));
ADD_META_TO_TABLE_INTER_PORTAL_POSITION=ALTER TABLE {InterPortalPosition} ADD metaData TEXT;
CREATE_INDEX_PORTAL_POSITION=CREATE INDEX IF NOT EXISTS {PortalPositionIndex} ON {PortalPosition} (portalName, networkName);
CREATE_INDEX_INTER_PORTAL_POSITION=CREATE INDEX IF NOT EXISTS {InterPortalPositionIndex} ON {InterPortalPosition} (portalName, networkName);
INSERT_PORTAL_POSITION=INSERT INTO {PortalPosition} (portalName, networkName, xCoordinate, yCoordinate, zCoordinate, positionType) VALUES (?, ?, ?, ?, ?, (SELECT {PositionType}.id FROM {PositionType} WHERE {PositionType}.positionName = ?));
INSERT_INTER_PORTAL_POSITION=INSERT INTO {InterPortalPosition} (portalName, networkName, xCoordinate, yCoordinate, zCoordinate, positionType) VALUES (?, ?, ?, ?, ?, (SELECT {PositionType}.id FROM {PositionType} WHERE {PositionType}.positionName = ?));
DELETE_PORTAL_POSITIONS=DELETE FROM {PortalPosition} WHERE portalName = ? AND networkName = ?;
DELETE_INTER_PORTAL_POSITIONS=DELETE FROM {InterPortalPosition} WHERE portalName = ? AND networkName = ?;
DELETE_PORTAL_POSITION=DELETE FROM {PortalPosition} WHERE portalName = ? AND networkName = ? AND xCoordinate = ? AND yCoordinate = ? AND zCoordinate = ?;
DELETE_INTER_PORTAL_POSITION=DELETE FROM {InterPortalPosition} WHERE portalName = ? AND networkName = ? AND xCoordinate = ? AND yCoordinate = ? AND zCoordinate = ?;
GET_PORTAL_POSITIONS=SELECT *, (SELECT {PositionType}.positionName FROM {PositionType} WHERE {PositionType}.id = positionType) as positionName FROM {PortalPosition} WHERE networkName = ? AND portalName = ?;
GET_INTER_PORTAL_POSITIONS=SELECT *, (SELECT {PositionType}.positionName FROM {PositionType} WHERE {PositionType}.id = positionType) as positionName FROM {InterPortalPosition} WHERE networkName = ? AND portalName = ?;
CREATE_TABLE_PORTAL_FLAG=CREATE TABLE IF NOT EXISTS {Flag} (id INTEGER PRIMARY KEY AUTOINCREMENT, `character` CHAR(1) UNIQUE NOT NULL);
CREATE_TABLE_SERVER_INFO=CREATE TABLE IF NOT EXISTS {ServerInfo} (serverId VARCHAR(36) NOT NULL, serverName NVARCHAR(255), PRIMARY KEY (serverId));
CREATE_TABLE_LAST_KNOWN_NAME=CREATE TABLE IF NOT EXISTS {LastKnownName} (uuid VARCHAR(36) NOT NULL, lastKnownName VARCHAR(16), PRIMARY KEY (uuid));
CREATE_TABLE_PORTAL_FLAG_RELATION=CREATE TABLE IF NOT EXISTS {PortalFlagRelation} (name NVARCHAR(180) NOT NULL, network NVARCHAR(180) NOT NULL, flag INTEGER NOT NULL, PRIMARY KEY (name, network, flag), FOREIGN KEY (name, network) REFERENCES {Portal} (name, network), FOREIGN KEY (flag) REFERENCES {Flag} (id));
CREATE_TABLE_INTER_PORTAL_FLAG_RELATION=CREATE TABLE IF NOT EXISTS {InterPortalFlagRelation} (name NVARCHAR(180) NOT NULL, network NVARCHAR(180) NOT NULL, flag INTEGER NOT NULL, PRIMARY KEY (name, network, flag), FOREIGN KEY (name, network) REFERENCES {InterPortal} (name, network), FOREIGN KEY (flag) REFERENCES {Flag} (id));
CREATE_VIEW_PORTAL=CREATE VIEW IF NOT EXISTS {PortalView} AS SELECT {Portal}.*, COALESCE(GROUP_CONCAT({Flag}.`character`, ''), '') AS flags, {LastKnownName}.lastKnownName FROM {Portal} LEFT OUTER JOIN {PortalFlagRelation} ON {Portal}.name = {PortalFlagRelation}.name AND {Portal}.network = {PortalFlagRelation}.network LEFT OUTER JOIN {Flag} ON {PortalFlagRelation}.flag = {Flag}.id LEFT OUTER JOIN {LastKnownName} ON {Portal}.network = {LastKnownName}.uuid GROUP BY {Portal}.name, {Portal}.network;
CREATE_VIEW_INTER_PORTAL=CREATE VIEW IF NOT EXISTS {InterPortalView} AS SELECT {InterPortal}.*, COALESCE(GROUP_CONCAT({Flag}.`character`, ''), '') AS flags, {LastKnownName}.lastKnownName, {ServerInfo}.serverName FROM {InterPortal} LEFT OUTER JOIN {InterPortalFlagRelation} ON {InterPortal}.name = {InterPortalFlagRelation}.name AND {InterPortal}.network = {InterPortalFlagRelation}.network LEFT OUTER JOIN {Flag} ON {InterPortalFlagRelation}.flag = {Flag}.id LEFT OUTER JOIN {LastKnownName} ON {InterPortal}.network = {LastKnownName}.uuid LEFT OUTER JOIN {ServerInfo} ON {ServerInfo}.serverId = {InterPortal}.homeServerId GROUP BY {InterPortal}.name, {InterPortal}.network;
INSERT_PORTAL_FLAG=INSERT INTO {Flag} (`character`) VALUES (?);
INSERT_PORTAL_FLAG_RELATION=INSERT INTO {PortalFlagRelation} (name, network, flag) VALUES (?, ?, (SELECT id FROM {Flag} WHERE `character` = ?));
INSERT_INTER_PORTAL_FLAG_RELATION=INSERT INTO {InterPortalFlagRelation} (name, network, flag) VALUES (?, ?, (SELECT id FROM {Flag} WHERE `character` = ?));
DELETE_PORTAL_FLAG_RELATIONS=DELETE FROM {PortalFlagRelation} WHERE name = ? AND network = ?;
DELETE_PORTAL_FLAG_RELATION=DELETE FROM {PortalFlagRelation} WHERE name = ? AND network = ? AND flag = (SELECT id FROM {Flag} WHERE `character` = ?);
DELETE_INTER_PORTAL_FLAG_RELATIONS=DELETE FROM {InterPortalFlagRelation} WHERE name = ? AND network = ?;
DELETE_INTER_PORTAL_FLAG_RELATION=DELETE FROM {InterPortalFlagRelation} WHERE name = ? AND network = ? AND flag = (SELECT id FROM {Flag} WHERE `character` = ?);
INSERT_PORTAL=INSERT INTO {Portal} (network, name, destination, world, x, y, z, ownerUUID, gateFileName, facing, flipZ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
INSERT_INTER_PORTAL=INSERT INTO {InterPortal} (network, name, destination, world, x, y, z, ownerUUID, gateFileName, facing, flipZ, homeServerId) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
DELETE_PORTAL=DELETE FROM {Portal} WHERE name = ? AND network = ?;
DELETE_INTER_PORTAL=DELETE FROM {InterPortal} WHERE name = ? AND network = ?;
REPLACE_SERVER_INFO=REPLACE INTO {ServerInfo} (serverId, serverName) VALUES(?, ?);
SHOW_INDEX_PORTAL_POSITION=SELECT * FROM sqlite_master WHERE type = 'index' AND name = '{PortalPositionIndex}';
SHOW_INDEX_INTER_PORTAL_POSITION=SELECT * FROM sqlite_master WHERE type = 'index' AND name = '{InterPortalPositionIndex}';
GET_PORTAL=SELECT * FROM {PortalView} WHERE name = ? AND network = ?;
GET_INTER_PORTAL=SELECT * FROM {InterPortalView} WHERE name = ? AND network = ?;
SET_PORTAL_META=UPDATE {Portal} SET metaData = ? WHERE name = ? AND network = ?;
SET_INTER_PORTAL_META=UPDATE {InterPortal} SET metaData = ? WHERE name = ? AND network = ?;
SET_PORTAL_POSITION_META=UPDATE {PortalPosition} SET metaData = ? WHERE portalName = ? AND networkName = ? AND xCoordinate = ? AND yCoordinate = ? AND zCoordinate = ?;
SET_INTER_PORTAL_POSITION_META=UPDATE {InterPortalPosition} SET metaData = ? WHERE portalName = ? AND networkName = ? AND xCoordinate = ? AND yCoordinate = ? AND zCoordinate = ?;
